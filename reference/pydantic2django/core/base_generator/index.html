
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Convert Pydantic models to Django models dynamically">
      
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../bidirectional_mapper/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>pydantic2django.core.base_generator - Pydantic2Django</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pydantic2django.core.base_generator" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Pydantic2Django" class="md-header__button md-logo" aria-label="Pydantic2Django" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pydantic2Django
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              pydantic2django.core.base_generator
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
  
    
  
  Pydantic2Django

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Architecture/CONTEXT_HANDLING/" class="md-tabs__link">
          
  
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../bugs/2025-10-01-xml-wrapper-child-fk-direction/" class="md-tabs__link">
          
  
  
  Bugs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../how_it_works/core_modules_and_concepts/" class="md-tabs__link">
          
  
  
  How it works

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../how_to_use/bidirectional_generation/" class="md-tabs__link">
          
  
  
  How to use

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../plans/gfk_generic_entries_plan/" class="md-tabs__link">
          
  
  
  Plans

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Pydantic2Django" class="md-nav__button md-logo" aria-label="Pydantic2Django" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Pydantic2Django
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic2Django
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Architecture/CONTEXT_HANDLING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Handling in Pydantic2Django
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Architecture/OVERVIEW/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OVERVIEW
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Comparisons
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Comparisons
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Architecture/comparisons/README_DJANGO_STORAGE_OPTIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic to Django Storage Approaches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Architecture/comparisons/README_PYDANTIC_DJANGO_METHODS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic to Django Method Integration Approaches
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bugs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Bugs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../bugs/2025-10-01-xml-wrapper-child-fk-direction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XML Schema wrapper children incorrectly attached as parent-side FKs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How it works
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            How it works
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/core_modules_and_concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core modules and concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/generic_entries_contenttypes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generic entries contenttypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/ingestor_strict_and_contract/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestor strict and contract
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/provider_backend_pattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Provider backend pattern
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/readme_bidirectional_mapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic2Django Bidirectional Mapper Details
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/readme_context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic2Django Context Storage and Generated Context Classes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/readme_ingestion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestion Pattern Across Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/readme_relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pydantic2Django Relationships Accessor Details
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/timescale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timescale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/xmlschema_element_and_type_handling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XML Schema Handling: Elements, Attributes, Types, Relationships
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_it_works/xmlschema_notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    XML Schema Notes: complexType Handling
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How to use
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            How to use
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_to_use/bidirectional_generation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bidirectional generation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_to_use/ingestor_validation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ingestor validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_to_use/integrate_into_django_app/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integrate into django app
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../how_to_use/parametrized_assert_tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parametrized Single-Assertion Tests for End-to-End Load/Process/Persist
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Plans
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Plans
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../plans/gfk_generic_entries_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Provider‑agnostic GenericForeignKey (GFK) plan
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" checked>
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    pydantic2django
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../entrypoint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.entrypoint
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1_3" checked>
        
          
          <label class="md-nav__link" for="__nav_7_1_3" id="__nav_7_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_1_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7_1_3">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    pydantic2django.core.base_generator
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.base_generator
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator" class="md-nav__link">
    <span class="md-ellipsis">
      base_generator
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator.BaseStaticGenerator" class="md-nav__link">
    <span class="md-ellipsis">
      BaseStaticGenerator
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseStaticGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator.BaseStaticGenerator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator.BaseStaticGenerator.discover_models" class="md-nav__link">
    <span class="md-ellipsis">
      discover_models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator.BaseStaticGenerator.generate" class="md-nav__link">
    <span class="md-ellipsis">
      generate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator.BaseStaticGenerator.generate_model_definition" class="md-nav__link">
    <span class="md-ellipsis">
      generate_model_definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator.BaseStaticGenerator.generate_models_file" class="md-nav__link">
    <span class="md-ellipsis">
      generate_models_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pydantic2django.core.base_generator.BaseStaticGenerator.setup_django_model" class="md-nav__link">
    <span class="md-ellipsis">
      setup_django_model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bidirectional_mapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.bidirectional_mapper
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../context/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.context
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../defs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.defs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.discovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../factories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.factories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filter_helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.filter_helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../imports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.imports
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mapping_units/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.mapping_units
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.relationships
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serialization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.serialization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../typing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.typing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_3_14" >
        
          
          <label class="md-nav__link" for="__nav_7_1_3_14" id="__nav_7_1_3_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.core.utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_1_3_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_3_14">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.core.utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/naming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.utils.naming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/relationships/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.utils.relationships
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/strings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.utils.strings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/timescale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.core.utils.timescale
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_4" >
        
          
          <label class="md-nav__link" for="__nav_7_1_4" id="__nav_7_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.dataclass
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_4">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.dataclass
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dataclass/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.dataclass
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dataclass/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.dataclass.discovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dataclass/factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.dataclass.factory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dataclass/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.dataclass.generator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_5" >
        
          
          <label class="md-nav__link" for="__nav_7_1_5" id="__nav_7_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.django
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_5">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.django
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/admin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.admin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/conversion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.conversion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/typing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.typing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_5_6" >
        
          
          <label class="md-nav__link" for="__nav_7_1_5_6" id="__nav_7_1_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.django.timescale
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_1_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_5_6">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.django.timescale
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/timescale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.timescale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/timescale/bases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.timescale.bases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/timescale/heuristics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.timescale.heuristics
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_5_7" >
        
          
          <label class="md-nav__link" for="__nav_7_1_5_7" id="__nav_7_1_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.django.utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_1_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_5_7">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.django.utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/utils/naming/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.utils.naming
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../django/utils/serialization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.django.utils.serialization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_6" >
        
          
          <label class="md-nav__link" for="__nav_7_1_6" id="__nav_7_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_6">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.pydantic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic.discovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic/factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic.factory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic.generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_6_5" >
        
          
          <label class="md-nav__link" for="__nav_7_1_6_5" id="__nav_7_1_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic.utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_1_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_6_5">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.pydantic.utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic/utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic.utils
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pydantic/utils/introspection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.pydantic.utils.introspection
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_7" >
        
          
          <label class="md-nav__link" for="__nav_7_1_7" id="__nav_7_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.typedclass
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_7">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.typedclass
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../typedclass/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.typedclass
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../typedclass/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.typedclass.discovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../typedclass/factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.typedclass.factory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../typedclass/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.typedclass.generator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_1_8" >
        
          
          <label class="md-nav__link" for="__nav_7_1_8" id="__nav_7_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1_8">
            <span class="md-nav__icon md-icon"></span>
            pydantic2django.xmlschema
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../xmlschema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../xmlschema/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema.discovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../xmlschema/factory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema.factory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../xmlschema/generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema.generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../xmlschema/ingestor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema.ingestor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../xmlschema/models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema.models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../xmlschema/parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pydantic2django.xmlschema.parser
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>pydantic2django.core.base_generator</h1>

<div class="doc doc-object doc-module">



<a id="pydantic2django.core.base_generator"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="pydantic2django.core.base_generator.BaseStaticGenerator" class="doc doc-heading">
            <code>BaseStaticGenerator</code>


<a href="#pydantic2django.core.base_generator.BaseStaticGenerator" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code>, <code><span title="typing.Generic">Generic</span>[<span title="pydantic2django.core.base_generator.SourceModelType">SourceModelType</span>, <span title="pydantic2django.core.base_generator.FieldInfoType">FieldInfoType</span>]</code></p>


        <p>Abstract base class for generating static Django models from source models (like Pydantic or Dataclasses).</p>







              <details class="quote">
                <summary>Source code in <code>src/pydantic2django/core/base_generator.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseStaticGenerator</span><span class="p">(</span><span class="n">ABC</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">,</span> <span class="n">FieldInfoType</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Abstract base class for generating static Django models from source models (like Pydantic or Dataclasses).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">app_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">filter_function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">type</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">discovery_instance</span><span class="p">:</span> <span class="n">BaseDiscovery</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">],</span>
        <span class="n">model_factory_instance</span><span class="p">:</span> <span class="n">BaseModelFactory</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">,</span> <span class="n">FieldInfoType</span><span class="p">],</span>
        <span class="n">module_mappings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">base_model_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">],</span>
        <span class="n">packages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">class_name_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Django&quot;</span><span class="p">,</span>
        <span class="n">enable_timescale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="c1"># --- GFK flags ---</span>
        <span class="n">enable_gfk</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">gfk_policy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;all_nested&quot;</span><span class="p">,</span>
        <span class="n">gfk_threshold_children</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">gfk_value_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;typed_columns&quot;</span><span class="p">,</span>
        <span class="n">gfk_normalize_common_attrs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the base generator.</span>

<span class="sd">        Args:</span>
<span class="sd">            output_path: Path to output the generated models.py file.</span>
<span class="sd">            packages: List of packages to scan for source models.</span>
<span class="sd">            app_label: Django app label to use for the models.</span>
<span class="sd">            filter_function: Optional function to filter which source models to include.</span>
<span class="sd">            verbose: Print verbose output.</span>
<span class="sd">            discovery_instance: An instance of a BaseDiscovery subclass.</span>
<span class="sd">            model_factory_instance: An instance of a BaseModelFactory subclass.</span>
<span class="sd">            module_mappings: Optional mapping of modules to remap imports.</span>
<span class="sd">            base_model_class: The base Django model class to inherit from.</span>
<span class="sd">            class_name_prefix: Prefix for generated Django model class names.</span>
<span class="sd">            enable_timescale: Whether to enable TimescaleDB support for hypertables.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span> <span class="o">=</span> <span class="n">output_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">packages</span> <span class="o">=</span> <span class="n">packages</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span> <span class="o">=</span> <span class="n">app_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_function</span> <span class="o">=</span> <span class="n">filter_function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span> <span class="o">=</span> <span class="n">discovery_instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_factory_instance</span> <span class="o">=</span> <span class="n">model_factory_instance</span>
        <span class="c1"># Base model class must be provided explicitly by subclass at call site.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span> <span class="o">=</span> <span class="n">base_model_class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">class_name_prefix</span> <span class="o">=</span> <span class="n">class_name_prefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Stores results from model factory</span>
        <span class="c1"># Feature flags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_timescale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable_timescale</span><span class="p">)</span>
        <span class="c1"># GFK feature flags</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">enable_gfk</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable_gfk</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gfk_policy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">gfk_policy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gfk_threshold_children</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">gfk_threshold_children</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gfk_value_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">gfk_value_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gfk_normalize_common_attrs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">gfk_normalize_common_attrs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span> <span class="o">=</span> <span class="n">ImportHandler</span><span class="p">(</span><span class="n">module_mappings</span><span class="o">=</span><span class="n">module_mappings</span><span class="p">)</span>

        <span class="c1"># Initialize Jinja2 environment</span>
        <span class="c1"># Look for templates in the django/templates subdirectory</span>
        <span class="c1"># package_templates_dir = os.path.join(os.path.dirname(__file__), &quot;..&quot;, &quot;templates&quot;) # Old path</span>
        <span class="n">package_templates_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;django&quot;</span><span class="p">,</span> <span class="s2">&quot;templates&quot;</span><span class="p">)</span>  <span class="c1"># Corrected path</span>

        <span class="c1"># If templates don&#39;t exist in the package, use the ones relative to the execution?</span>
        <span class="c1"># This might need adjustment based on packaging/distribution.</span>
        <span class="c1"># For now, assume templates are relative to the package structure.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">package_templates_dir</span><span class="p">):</span>
            <span class="c1"># Fallback or raise error might be needed</span>
            <span class="n">package_templates_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">(),</span> <span class="s2">&quot;templates&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">package_templates_dir</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Templates directory not found at expected location: </span><span class="si">{</span><span class="n">package_templates_dir</span><span class="si">}</span><span class="s2">. Jinja might fail.&quot;</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span> <span class="o">=</span> <span class="n">jinja2</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span>
            <span class="n">loader</span><span class="o">=</span><span class="n">jinja2</span><span class="o">.</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="n">package_templates_dir</span><span class="p">),</span>
            <span class="n">trim_blocks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">lstrip_blocks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Register common custom filters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s2">&quot;format_type_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">TypeHandler</span><span class="o">.</span><span class="n">format_type_string</span>
        <span class="c1"># Provide an escaping filter for embedding strings safely in generated Python code</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">..core.utils.strings</span><span class="w"> </span><span class="kn">import</span> <span class="n">sanitize_string</span> <span class="k">as</span> <span class="n">_escape_py_str</span>  <span class="c1"># Local import to avoid cycles</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s2">&quot;escape_py_str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_escape_py_str</span>
        <span class="c1"># Add more common filters if needed</span>

        <span class="c1"># Add base model import</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">)</span>

    <span class="c1"># --- Abstract Methods to be Implemented by Subclasses ---</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_source_model_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">carrier</span><span class="p">:</span> <span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the original source model from the carrier.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_add_source_model_import</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">carrier</span><span class="p">:</span> <span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the necessary import for the original source model.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_prepare_template_context</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">unique_model_definitions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">django_model_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">imports</span><span class="p">:</span> <span class="nb">dict</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prepare the subclass-specific context for the main models_file.py.j2 template.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_models_in_processing_order</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return source models in the correct processing (dependency) order.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_model_definition_extra_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">carrier</span><span class="p">:</span> <span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Provide extra context specific to the source type for model_definition.py.j2.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_default_base_model_class</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the required base Django model class for this generator.</span>

<span class="sd">        Subclasses implement this so they can easily and explicitly resolve</span>
<span class="sd">        the correct base and pass it into the base initializer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="c1"># --- Common Methods ---</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Main entry point: Generate and write the models file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The path to the generated models file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_models_file</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_models_file</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully generated models file at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating models file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Use exc_info for traceback</span>
            <span class="k">raise</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_models_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write the generated content to the output file.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Writing models to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output_dir</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_dir</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Created output directory: </span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to create output directory </span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">raise</span>  <span class="c1"># Re-raise after logging</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>  <span class="c1"># Specify encoding</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully wrote models to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to write to output file </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span>  <span class="c1"># Re-raise after logging</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">discover_models</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Discover source models using the configured discovery instance.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Discovering models from packages: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">packages</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Corrected call matching BaseDiscovery signature</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">discover_models</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">packages</span> <span class="ow">or</span> <span class="p">[],</span>  <span class="c1"># Pass empty list if None</span>
            <span class="n">app_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
            <span class="n">user_filters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_function</span><span class="p">,</span>  <span class="c1"># Keep as is for now</span>
        <span class="p">)</span>

        <span class="c1"># Analyze dependencies after discovery</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">analyze_dependencies</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Discovered </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">filtered_models</span><span class="p">)</span><span class="si">}</span><span class="s2"> models after filtering.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">filtered_models</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">filtered_models</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  (No models found or passed filter)&quot;</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Dependency analysis complete.&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setup_django_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_model</span><span class="p">:</span> <span class="n">SourceModelType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Uses the model factory to create a Django model representation from a source model.</span>

<span class="sd">        Args:</span>
<span class="sd">            source_model: The source model instance (e.g., Pydantic class, Dataclass).</span>

<span class="sd">        Returns:</span>
<span class="sd">            A ConversionCarrier containing the results, or None if creation failed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">source_model_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source_model</span><span class="p">,</span> <span class="s2">&quot;__name__&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_model</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting up Django model for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Instantiate the carrier here</span>
        <span class="n">carrier</span> <span class="o">=</span> <span class="n">ConversionCarrier</span><span class="p">(</span>
            <span class="n">source_model</span><span class="o">=</span><span class="n">cast</span><span class="p">(</span><span class="nb">type</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">],</span> <span class="n">source_model</span><span class="p">),</span>
            <span class="n">meta_app_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
            <span class="n">base_django_model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">,</span>
            <span class="n">class_name_prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name_prefix</span><span class="p">,</span>
            <span class="c1"># Add other defaults/configs if needed, e.g., strict mode</span>
            <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Example default</span>
            <span class="c1"># GFK flags</span>
            <span class="n">enable_gfk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">enable_gfk</span><span class="p">,</span>
            <span class="n">gfk_policy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_policy</span><span class="p">,</span>
            <span class="n">gfk_threshold_children</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_threshold_children</span><span class="p">,</span>
            <span class="n">gfk_value_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_value_mode</span><span class="p">,</span>
            <span class="n">gfk_normalize_common_attrs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_normalize_common_attrs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Use the factory to process the source model and populate the carrier</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model_factory_instance</span><span class="o">.</span><span class="n">make_django_model</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>  <span class="c1"># Pass carrier to factory</span>

            <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully processed </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">carrier</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Log if model creation resulted in None (e.g., only context fields)</span>
                <span class="c1"># Check carrier.context_fields or carrier.invalid_fields for details</span>
                <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">context_fields</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_fields</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">carrier</span><span class="o">.</span><span class="n">relationship_fields</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipped Django model class for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> - only context fields found.&quot;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">carrier</span><span class="o">.</span><span class="n">invalid_fields</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Skipped Django model class for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> due to invalid fields: </span><span class="si">{</span><span class="n">carrier</span><span class="o">.</span><span class="n">invalid_fields</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Django model was not generated for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> for unknown reasons.&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Return None if no Django model was created</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error processing </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> with factory: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_model_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">carrier</span><span class="p">:</span> <span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a string definition for a single Django model using a template.</span>

<span class="sd">        Args:</span>
<span class="sd">            carrier: The ConversionCarrier containing the generated Django model and context.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The string representation of the Django model definition.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">:</span>
            <span class="c1"># It&#39;s possible a carrier exists only for context, handle gracefully.</span>
            <span class="n">source_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_source_model_name</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">model_context</span> <span class="ow">and</span> <span class="n">carrier</span><span class="o">.</span><span class="n">model_context</span><span class="o">.</span><span class="n">context_fields</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping Django model definition for </span><span class="si">{</span><span class="n">source_name</span><span class="si">}</span><span class="s2"> (likely context-only).&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="s2">&quot;&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Cannot generate model definition for </span><span class="si">{</span><span class="n">source_name</span><span class="si">}</span><span class="s2">: django_model is missing in carrier.&quot;</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="s2">&quot;&quot;</span>

        <span class="n">django_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_generic_type</span><span class="p">(</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
        <span class="n">source_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_source_model_name</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>  <span class="c1"># Get original name via abstract method</span>

        <span class="c1"># --- Prepare Fields ---</span>
        <span class="n">fields_info</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Combine regular and relationship fields from the carrier</span>
        <span class="n">all_django_fields</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_fields</span><span class="p">,</span> <span class="o">**</span><span class="n">carrier</span><span class="o">.</span><span class="n">relationship_fields</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="n">all_django_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># The field_object is already an instantiated Django field</span>
            <span class="c1"># Add (name, object) tuple directly for the template</span>
            <span class="n">fields_info</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span><span class="p">))</span>

        <span class="c1"># --- Prepare Meta ---</span>
        <span class="n">meta_options</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">,</span> <span class="s2">&quot;_meta&quot;</span><span class="p">):</span>
            <span class="n">model_meta</span> <span class="o">=</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="n">_meta</span>
            <span class="n">meta_options</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;db_table&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_meta</span><span class="p">,</span> <span class="s2">&quot;db_table&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">django_model_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
                <span class="s2">&quot;app_label&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
                <span class="s2">&quot;verbose_name&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_meta</span><span class="p">,</span> <span class="s2">&quot;verbose_name&quot;</span><span class="p">,</span> <span class="n">django_model_name</span><span class="p">),</span>
                <span class="s2">&quot;verbose_name_plural&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_meta</span><span class="p">,</span> <span class="s2">&quot;verbose_name_plural&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">django_model_name</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">),</span>
                <span class="c1"># Add other meta options if needed</span>
            <span class="p">}</span>

        <span class="c1"># --- Prepare Base Class Info ---</span>
        <span class="n">base_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__bases__</span> <span class="ow">and</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">:</span>
            <span class="c1"># Use the immediate parent if it&#39;s not the absolute base &#39;models.Model&#39;</span>
            <span class="c1"># Assumes single inheritance for the generated model besides the ultimate base</span>
            <span class="n">parent_class</span> <span class="o">=</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="c1"># Check if the parent is our intended base_model_class or something else</span>
            <span class="c1"># This logic might need refinement depending on how complex the inheritance gets</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">parent_class</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">)</span> <span class="ow">and</span> <span class="n">parent_class</span> <span class="o">!=</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">:</span>
                <span class="n">base_model_name</span> <span class="o">=</span> <span class="n">parent_class</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="c1"># Add import for the parent if it&#39;s not the configured base_model_class</span>
                <span class="k">if</span> <span class="n">parent_class</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="n">parent_class</span><span class="p">)</span>

        <span class="c1"># --- Get Subclass Specific Context ---</span>
        <span class="n">extra_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_definition_extra_context</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>

        <span class="c1"># --- Process Pending Multi-FK Unions and add to definitions dict ---</span>
        <span class="n">multi_fk_field_names</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Keep track for validation hint</span>
        <span class="n">validation_needed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">pending_multi_fk_unions</span><span class="p">:</span>
            <span class="n">validation_needed</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">original_field_name</span><span class="p">,</span> <span class="n">union_details</span> <span class="ow">in</span> <span class="n">carrier</span><span class="o">.</span><span class="n">pending_multi_fk_unions</span><span class="p">:</span>
                <span class="n">pydantic_models</span> <span class="o">=</span> <span class="n">union_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;models&quot;</span><span class="p">,</span> <span class="p">[])</span>
                <span class="k">for</span> <span class="n">pydantic_model</span> <span class="ow">in</span> <span class="n">pydantic_models</span><span class="p">:</span>
                    <span class="c1"># Construct field name (e.g., original_name_relatedmodel)</span>
                    <span class="n">fk_field_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">original_field_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">pydantic_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">multi_fk_field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fk_field_name</span><span class="p">)</span>
                    <span class="c1"># Get corresponding Django model</span>
                    <span class="n">pydantic_factory</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">PydanticModelFactory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_factory_instance</span><span class="p">)</span>
                    <span class="n">django_model_rel</span> <span class="o">=</span> <span class="n">pydantic_factory</span><span class="o">.</span><span class="n">relationship_accessor</span><span class="o">.</span><span class="n">get_django_model_for_pydantic</span><span class="p">(</span>
                        <span class="n">pydantic_model</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">django_model_rel</span><span class="p">:</span>
                        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Could not find Django model for Pydantic model </span><span class="si">{</span><span class="n">pydantic_model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> referenced in multi-FK union for </span><span class="si">{</span><span class="n">original_field_name</span><span class="si">}</span><span class="s2">. Skipping FK field.&quot;</span>
                        <span class="p">)</span>
                        <span class="k">continue</span>
                    <span class="c1"># Use string for model ref in kwargs</span>
                    <span class="n">target_model_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">django_model_rel</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">django_model_rel</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="c1"># Add import for the related Django model</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="n">django_model_rel</span><span class="p">)</span>

                    <span class="c1"># Define FK kwargs (always null=True, blank=True)</span>
                    <span class="c1"># Use strings for values that need to be represented in code</span>
                    <span class="n">fk_kwargs</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">target_model_str</span><span class="p">,</span>
                        <span class="s2">&quot;on_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;models.SET_NULL&quot;</span><span class="p">,</span>  <span class="c1"># Use string for template</span>
                        <span class="s2">&quot;null&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="s2">&quot;blank&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                        <span class="c1"># Generate related_name to avoid clashes</span>
                        <span class="s2">&quot;related_name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">fk_field_name</span><span class="si">}</span><span class="s2">_set&#39;&quot;</span><span class="p">,</span>  <span class="c1"># Ensure related_name is quoted string</span>
                    <span class="p">}</span>
                    <span class="c1"># Generate the definition string</span>
                    <span class="n">fk_def_string</span> <span class="o">=</span> <span class="n">generate_field_definition_string</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">,</span> <span class="n">fk_kwargs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">)</span>
                    <span class="c1"># Add to the main definitions dictionary</span>
                    <span class="n">carrier</span><span class="o">.</span><span class="n">django_field_definitions</span><span class="p">[</span><span class="n">fk_field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fk_def_string</span>

        <span class="c1"># --- Prepare Final Context --- #</span>
        <span class="c1"># Ensure the context uses the potentially updated definitions dict from the carrier</span>
        <span class="c1"># Subclass _get_model_definition_extra_context should already provide this</span>
        <span class="c1"># via `field_definitions=carrier.django_field_definitions`</span>
        <span class="n">template_context</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="n">django_model_name</span><span class="p">,</span>
            <span class="s2">&quot;pydantic_model_name&quot;</span><span class="p">:</span> <span class="n">source_model_name</span><span class="p">,</span>
            <span class="s2">&quot;base_model_name&quot;</span><span class="p">:</span> <span class="n">base_model_name</span><span class="p">,</span>
            <span class="s2">&quot;is_timescale_model&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">base_model_name</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;TimescaleBase&quot;</span><span class="p">)),</span>
            <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="n">meta_options</span><span class="p">,</span>
            <span class="s2">&quot;app_label&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
            <span class="s2">&quot;multi_fk_field_names&quot;</span><span class="p">:</span> <span class="n">multi_fk_field_names</span><span class="p">,</span>  <span class="c1"># Pass names for validation hint</span>
            <span class="s2">&quot;validation_needed&quot;</span><span class="p">:</span> <span class="n">validation_needed</span><span class="p">,</span>  <span class="c1"># Signal if validation needed</span>
            <span class="c1"># Include extra context from subclass (should include field_definitions)</span>
            <span class="o">**</span><span class="n">extra_context</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># --- Render Template --- #</span>
        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;model_definition.py.j2&quot;</span><span class="p">)</span>
        <span class="n">definition_str</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">template_context</span><span class="p">)</span>

        <span class="c1"># Add import for the original source model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_source_model_import</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">definition_str</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_deduplicate_definitions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">definitions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove duplicate model definitions based on class name.&quot;&quot;&quot;</span>
        <span class="n">unique_definitions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">seen_class_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">definition</span> <span class="ow">in</span> <span class="n">definitions</span><span class="p">:</span>
            <span class="c1"># Basic regex to find &#39;class ClassName(&#39; - might need adjustment for complex cases</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\s*class\s+(\w+)\(&quot;</span><span class="p">,</span> <span class="n">definition</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">MULTILINE</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                <span class="n">class_name</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">class_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen_class_names</span><span class="p">:</span>
                    <span class="n">unique_definitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">definition</span><span class="p">)</span>
                    <span class="n">seen_class_names</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">class_name</span><span class="p">)</span>
                <span class="c1"># else: logger.debug(f&quot;Skipping duplicate definition for class: {class_name}&quot;)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># If no class definition found (e.g., comments, imports), keep it? Or discard?</span>
                <span class="c1"># For now, keep non-class definitions assuming they might be needed context/comments.</span>
                <span class="n">unique_definitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">definition</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Could not extract class name from definition block for deduplication.&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">unique_definitions</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_clean_generic_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove generic parameters like [T] or &lt;T&gt; from a type name.&quot;&quot;&quot;</span>
        <span class="c1"># Handles Class[Param] or Class&lt;Param&gt;</span>
        <span class="n">cleaned_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[\[&lt;].*?[\]&gt;]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="c1"># Also handle cases like &#39;ModelName.T&#39; if typevars are used this way</span>
        <span class="n">cleaned_name</span> <span class="o">=</span> <span class="n">cleaned_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">cleaned_name</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_models_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates the complete content for the models.py file.</span>
<span class="sd">        This method orchestrates discovery, model setup, definition generation,</span>
<span class="sd">        import collection, and template rendering.</span>
<span class="sd">        Subclasses might override this to add specific steps (like context class generation).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">discover_models</span><span class="p">()</span>  <span class="c1"># Populates discovery instance</span>
        <span class="n">models_to_process</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_models_in_processing_order</span><span class="p">()</span>  <span class="c1"># Abstract method</span>

        <span class="c1"># Reset state for this run</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">extra_type_imports</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">pydantic_imports</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">context_class_imports</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">imported_names</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">processed_field_types</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="c1"># Re-add base model import after clearing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">)</span>

        <span class="n">model_definitions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">django_model_names</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># For __all__</span>

        <span class="c1"># Setup Django models first (populates self.carriers)</span>
        <span class="k">for</span> <span class="n">source_model</span> <span class="ow">in</span> <span class="n">models_to_process</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setup_django_model</span><span class="p">(</span><span class="n">source_model</span><span class="p">)</span>  <span class="c1"># Calls factory, populates carrier</span>

        <span class="c1"># Generate definitions from carriers</span>
        <span class="k">for</span> <span class="n">carrier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span><span class="p">:</span>
            <span class="c1"># Generate Django model definition if model exists</span>
            <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">model_def</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_model_definition</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>  <span class="c1"># Uses template</span>
                    <span class="k">if</span> <span class="n">model_def</span><span class="p">:</span>  <span class="c1"># Only add if definition was generated</span>
                        <span class="n">model_definitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_def</span><span class="p">)</span>
                        <span class="n">django_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_generic_type</span><span class="p">(</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                        <span class="n">django_model_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">django_model_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">source_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_source_model_name</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating definition for source model </span><span class="si">{</span><span class="n">source_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># Subclasses might add context class generation here by overriding this method</span>
            <span class="c1"># or by generate_model_definition adding context-related imports.</span>

        <span class="c1"># Deduplicate definitions</span>
        <span class="n">unique_model_definitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deduplicate_definitions</span><span class="p">(</span><span class="n">model_definitions</span><span class="p">)</span>

        <span class="c1"># Deduplicate imports gathered during the process</span>
        <span class="n">imports</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">deduplicate_imports</span><span class="p">()</span>

        <span class="c1"># Prepare context using subclass method (_prepare_template_context)</span>
        <span class="n">template_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_template_context</span><span class="p">(</span><span class="n">unique_model_definitions</span><span class="p">,</span> <span class="n">django_model_names</span><span class="p">,</span> <span class="n">imports</span><span class="p">)</span>

        <span class="c1"># Add common context items</span>
        <span class="n">template_context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;generation_timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">),</span>
                <span class="s2">&quot;base_model_module&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
                <span class="s2">&quot;base_model_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                <span class="s2">&quot;extra_type_imports&quot;</span><span class="p">:</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">extra_type_imports</span><span class="p">),</span>
                <span class="c1"># Add other common items as needed</span>
            <span class="p">}</span>
        <span class="p">)</span>

        <span class="c1"># Render the main template</span>
        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;models_file.py.j2&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">template_context</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="pydantic2django.core.base_generator.BaseStaticGenerator.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">output_path</span><span class="p">,</span> <span class="n">app_label</span><span class="p">,</span> <span class="n">filter_function</span><span class="p">,</span> <span class="n">verbose</span><span class="p">,</span> <span class="n">discovery_instance</span><span class="p">,</span> <span class="n">model_factory_instance</span><span class="p">,</span> <span class="n">module_mappings</span><span class="p">,</span> <span class="n">base_model_class</span><span class="p">,</span> <span class="n">packages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">class_name_prefix</span><span class="o">=</span><span class="s1">&#39;Django&#39;</span><span class="p">,</span> <span class="n">enable_timescale</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">enable_gfk</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">gfk_policy</span><span class="o">=</span><span class="s1">&#39;all_nested&#39;</span><span class="p">,</span> <span class="n">gfk_threshold_children</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">gfk_value_mode</span><span class="o">=</span><span class="s1">&#39;typed_columns&#39;</span><span class="p">,</span> <span class="n">gfk_normalize_common_attrs</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

<a href="#pydantic2django.core.base_generator.BaseStaticGenerator.__init__" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize the base generator.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>output_path</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to output the generated models.py file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>packages</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of packages to scan for source models.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>app_label</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Django app label to use for the models.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filter_function</code>
            </td>
            <td>
                  <code><span title="collections.abc.Callable">Callable</span>[[<span title="type">type</span>[<span title="pydantic2django.core.base_generator.SourceModelType">SourceModelType</span>]], <span title="bool">bool</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional function to filter which source models to include.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbose</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Print verbose output.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>discovery_instance</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseDiscovery (pydantic2django.core.discovery.BaseDiscovery)" href="../../../../Architecture/OVERVIEW/#pydantic2django.core.discovery.BaseDiscovery">BaseDiscovery</a>[<span title="pydantic2django.core.base_generator.SourceModelType">SourceModelType</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of a BaseDiscovery subclass.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_factory_instance</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="BaseModelFactory (pydantic2django.core.factories.BaseModelFactory)" href="../../../../Architecture/OVERVIEW/#pydantic2django.core.factories.BaseModelFactory">BaseModelFactory</a>[<span title="pydantic2django.core.base_generator.SourceModelType">SourceModelType</span>, <span title="pydantic2django.core.base_generator.FieldInfoType">FieldInfoType</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of a BaseModelFactory subclass.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>module_mappings</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="str">str</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional mapping of modules to remap imports.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>base_model_class</code>
            </td>
            <td>
                  <code><span title="type">type</span>[<span title="django.db.models.Model">Model</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The base Django model class to inherit from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>class_name_prefix</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Prefix for generated Django model class names.</p>
              </div>
            </td>
            <td>
                  <code>&#39;Django&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>enable_timescale</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to enable TimescaleDB support for hypertables.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/pydantic2django/core/base_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">app_label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">filter_function</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">type</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]],</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">discovery_instance</span><span class="p">:</span> <span class="n">BaseDiscovery</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">],</span>
    <span class="n">model_factory_instance</span><span class="p">:</span> <span class="n">BaseModelFactory</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">,</span> <span class="n">FieldInfoType</span><span class="p">],</span>
    <span class="n">module_mappings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">base_model_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">],</span>
    <span class="n">packages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">class_name_prefix</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Django&quot;</span><span class="p">,</span>
    <span class="n">enable_timescale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="c1"># --- GFK flags ---</span>
    <span class="n">enable_gfk</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">gfk_policy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;all_nested&quot;</span><span class="p">,</span>
    <span class="n">gfk_threshold_children</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
    <span class="n">gfk_value_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="s2">&quot;typed_columns&quot;</span><span class="p">,</span>
    <span class="n">gfk_normalize_common_attrs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the base generator.</span>

<span class="sd">    Args:</span>
<span class="sd">        output_path: Path to output the generated models.py file.</span>
<span class="sd">        packages: List of packages to scan for source models.</span>
<span class="sd">        app_label: Django app label to use for the models.</span>
<span class="sd">        filter_function: Optional function to filter which source models to include.</span>
<span class="sd">        verbose: Print verbose output.</span>
<span class="sd">        discovery_instance: An instance of a BaseDiscovery subclass.</span>
<span class="sd">        model_factory_instance: An instance of a BaseModelFactory subclass.</span>
<span class="sd">        module_mappings: Optional mapping of modules to remap imports.</span>
<span class="sd">        base_model_class: The base Django model class to inherit from.</span>
<span class="sd">        class_name_prefix: Prefix for generated Django model class names.</span>
<span class="sd">        enable_timescale: Whether to enable TimescaleDB support for hypertables.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span> <span class="o">=</span> <span class="n">output_path</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">packages</span> <span class="o">=</span> <span class="n">packages</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span> <span class="o">=</span> <span class="n">app_label</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">filter_function</span> <span class="o">=</span> <span class="n">filter_function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span> <span class="o">=</span> <span class="n">discovery_instance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_factory_instance</span> <span class="o">=</span> <span class="n">model_factory_instance</span>
    <span class="c1"># Base model class must be provided explicitly by subclass at call site.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span> <span class="o">=</span> <span class="n">base_model_class</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">class_name_prefix</span> <span class="o">=</span> <span class="n">class_name_prefix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Stores results from model factory</span>
    <span class="c1"># Feature flags</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">enable_timescale</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable_timescale</span><span class="p">)</span>
    <span class="c1"># GFK feature flags</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">enable_gfk</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">enable_gfk</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gfk_policy</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">gfk_policy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gfk_threshold_children</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">gfk_threshold_children</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gfk_value_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">gfk_value_mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gfk_normalize_common_attrs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">gfk_normalize_common_attrs</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span> <span class="o">=</span> <span class="n">ImportHandler</span><span class="p">(</span><span class="n">module_mappings</span><span class="o">=</span><span class="n">module_mappings</span><span class="p">)</span>

    <span class="c1"># Initialize Jinja2 environment</span>
    <span class="c1"># Look for templates in the django/templates subdirectory</span>
    <span class="c1"># package_templates_dir = os.path.join(os.path.dirname(__file__), &quot;..&quot;, &quot;templates&quot;) # Old path</span>
    <span class="n">package_templates_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">),</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;django&quot;</span><span class="p">,</span> <span class="s2">&quot;templates&quot;</span><span class="p">)</span>  <span class="c1"># Corrected path</span>

    <span class="c1"># If templates don&#39;t exist in the package, use the ones relative to the execution?</span>
    <span class="c1"># This might need adjustment based on packaging/distribution.</span>
    <span class="c1"># For now, assume templates are relative to the package structure.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">package_templates_dir</span><span class="p">):</span>
        <span class="c1"># Fallback or raise error might be needed</span>
        <span class="n">package_templates_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">absolute</span><span class="p">(),</span> <span class="s2">&quot;templates&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">package_templates_dir</span><span class="p">):</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Templates directory not found at expected location: </span><span class="si">{</span><span class="n">package_templates_dir</span><span class="si">}</span><span class="s2">. Jinja might fail.&quot;</span>
            <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span> <span class="o">=</span> <span class="n">jinja2</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span>
        <span class="n">loader</span><span class="o">=</span><span class="n">jinja2</span><span class="o">.</span><span class="n">FileSystemLoader</span><span class="p">(</span><span class="n">package_templates_dir</span><span class="p">),</span>
        <span class="n">trim_blocks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">lstrip_blocks</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Register common custom filters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s2">&quot;format_type_string&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">TypeHandler</span><span class="o">.</span><span class="n">format_type_string</span>
    <span class="c1"># Provide an escaping filter for embedding strings safely in generated Python code</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">..core.utils.strings</span><span class="w"> </span><span class="kn">import</span> <span class="n">sanitize_string</span> <span class="k">as</span> <span class="n">_escape_py_str</span>  <span class="c1"># Local import to avoid cycles</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="s2">&quot;escape_py_str&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_escape_py_str</span>
    <span class="c1"># Add more common filters if needed</span>

    <span class="c1"># Add base model import</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pydantic2django.core.base_generator.BaseStaticGenerator.discover_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">discover_models</span><span class="p">()</span></code>

<a href="#pydantic2django.core.base_generator.BaseStaticGenerator.discover_models" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Discover source models using the configured discovery instance.</p>


            <details class="quote">
              <summary>Source code in <code>src/pydantic2django/core/base_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">discover_models</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Discover source models using the configured discovery instance.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Discovering models from packages: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">packages</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Corrected call matching BaseDiscovery signature</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">discover_models</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">packages</span> <span class="ow">or</span> <span class="p">[],</span>  <span class="c1"># Pass empty list if None</span>
        <span class="n">app_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
        <span class="n">user_filters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_function</span><span class="p">,</span>  <span class="c1"># Keep as is for now</span>
    <span class="p">)</span>

    <span class="c1"># Analyze dependencies after discovery</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">analyze_dependencies</span><span class="p">()</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Discovered </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">filtered_models</span><span class="p">)</span><span class="si">}</span><span class="s2"> models after filtering.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">filtered_models</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">discovery_instance</span><span class="o">.</span><span class="n">filtered_models</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  (No models found or passed filter)&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Dependency analysis complete.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pydantic2django.core.base_generator.BaseStaticGenerator.generate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate</span><span class="p">()</span></code>

<a href="#pydantic2django.core.base_generator.BaseStaticGenerator.generate" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Main entry point: Generate and write the models file.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The path to the generated models file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/pydantic2django/core/base_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main entry point: Generate and write the models file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The path to the generated models file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_models_file</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write_models_file</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully generated models file at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">output_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_path</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating models file: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Use exc_info for traceback</span>
        <span class="k">raise</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pydantic2django.core.base_generator.BaseStaticGenerator.generate_model_definition" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_model_definition</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span></code>

<a href="#pydantic2django.core.base_generator.BaseStaticGenerator.generate_model_definition" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generates a string definition for a single Django model using a template.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>carrier</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="ConversionCarrier (pydantic2django.core.factories.ConversionCarrier)" href="../../../../Architecture/OVERVIEW/#pydantic2django.core.factories.ConversionCarrier">ConversionCarrier</a>[<span title="pydantic2django.core.base_generator.SourceModelType">SourceModelType</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ConversionCarrier containing the generated Django model and context.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string representation of the Django model definition.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/pydantic2django/core/base_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_model_definition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">carrier</span><span class="p">:</span> <span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a string definition for a single Django model using a template.</span>

<span class="sd">    Args:</span>
<span class="sd">        carrier: The ConversionCarrier containing the generated Django model and context.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The string representation of the Django model definition.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">:</span>
        <span class="c1"># It&#39;s possible a carrier exists only for context, handle gracefully.</span>
        <span class="n">source_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_source_model_name</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">model_context</span> <span class="ow">and</span> <span class="n">carrier</span><span class="o">.</span><span class="n">model_context</span><span class="o">.</span><span class="n">context_fields</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipping Django model definition for </span><span class="si">{</span><span class="n">source_name</span><span class="si">}</span><span class="s2"> (likely context-only).&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Cannot generate model definition for </span><span class="si">{</span><span class="n">source_name</span><span class="si">}</span><span class="s2">: django_model is missing in carrier.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="n">django_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_generic_type</span><span class="p">(</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="n">source_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_source_model_name</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>  <span class="c1"># Get original name via abstract method</span>

    <span class="c1"># --- Prepare Fields ---</span>
    <span class="n">fields_info</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Combine regular and relationship fields from the carrier</span>
    <span class="n">all_django_fields</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_fields</span><span class="p">,</span> <span class="o">**</span><span class="n">carrier</span><span class="o">.</span><span class="n">relationship_fields</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span> <span class="ow">in</span> <span class="n">all_django_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="c1"># The field_object is already an instantiated Django field</span>
        <span class="c1"># Add (name, object) tuple directly for the template</span>
        <span class="n">fields_info</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">field_name</span><span class="p">,</span> <span class="n">field_object</span><span class="p">))</span>

    <span class="c1"># --- Prepare Meta ---</span>
    <span class="n">meta_options</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">,</span> <span class="s2">&quot;_meta&quot;</span><span class="p">):</span>
        <span class="n">model_meta</span> <span class="o">=</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="n">_meta</span>
        <span class="n">meta_options</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;db_table&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_meta</span><span class="p">,</span> <span class="s2">&quot;db_table&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">django_model_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">),</span>
            <span class="s2">&quot;app_label&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
            <span class="s2">&quot;verbose_name&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_meta</span><span class="p">,</span> <span class="s2">&quot;verbose_name&quot;</span><span class="p">,</span> <span class="n">django_model_name</span><span class="p">),</span>
            <span class="s2">&quot;verbose_name_plural&quot;</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">model_meta</span><span class="p">,</span> <span class="s2">&quot;verbose_name_plural&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">django_model_name</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">),</span>
            <span class="c1"># Add other meta options if needed</span>
        <span class="p">}</span>

    <span class="c1"># --- Prepare Base Class Info ---</span>
    <span class="n">base_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__bases__</span> <span class="ow">and</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">:</span>
        <span class="c1"># Use the immediate parent if it&#39;s not the absolute base &#39;models.Model&#39;</span>
        <span class="c1"># Assumes single inheritance for the generated model besides the ultimate base</span>
        <span class="n">parent_class</span> <span class="o">=</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Check if the parent is our intended base_model_class or something else</span>
        <span class="c1"># This logic might need refinement depending on how complex the inheritance gets</span>
        <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">parent_class</span><span class="p">,</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">)</span> <span class="ow">and</span> <span class="n">parent_class</span> <span class="o">!=</span> <span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">:</span>
            <span class="n">base_model_name</span> <span class="o">=</span> <span class="n">parent_class</span><span class="o">.</span><span class="vm">__name__</span>
            <span class="c1"># Add import for the parent if it&#39;s not the configured base_model_class</span>
            <span class="k">if</span> <span class="n">parent_class</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="n">parent_class</span><span class="p">)</span>

    <span class="c1"># --- Get Subclass Specific Context ---</span>
    <span class="n">extra_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_definition_extra_context</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>

    <span class="c1"># --- Process Pending Multi-FK Unions and add to definitions dict ---</span>
    <span class="n">multi_fk_field_names</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Keep track for validation hint</span>
    <span class="n">validation_needed</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">pending_multi_fk_unions</span><span class="p">:</span>
        <span class="n">validation_needed</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">original_field_name</span><span class="p">,</span> <span class="n">union_details</span> <span class="ow">in</span> <span class="n">carrier</span><span class="o">.</span><span class="n">pending_multi_fk_unions</span><span class="p">:</span>
            <span class="n">pydantic_models</span> <span class="o">=</span> <span class="n">union_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;models&quot;</span><span class="p">,</span> <span class="p">[])</span>
            <span class="k">for</span> <span class="n">pydantic_model</span> <span class="ow">in</span> <span class="n">pydantic_models</span><span class="p">:</span>
                <span class="c1"># Construct field name (e.g., original_name_relatedmodel)</span>
                <span class="n">fk_field_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">original_field_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">pydantic_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">multi_fk_field_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fk_field_name</span><span class="p">)</span>
                <span class="c1"># Get corresponding Django model</span>
                <span class="n">pydantic_factory</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">PydanticModelFactory</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_factory_instance</span><span class="p">)</span>
                <span class="n">django_model_rel</span> <span class="o">=</span> <span class="n">pydantic_factory</span><span class="o">.</span><span class="n">relationship_accessor</span><span class="o">.</span><span class="n">get_django_model_for_pydantic</span><span class="p">(</span>
                    <span class="n">pydantic_model</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">django_model_rel</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Could not find Django model for Pydantic model </span><span class="si">{</span><span class="n">pydantic_model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> referenced in multi-FK union for </span><span class="si">{</span><span class="n">original_field_name</span><span class="si">}</span><span class="s2">. Skipping FK field.&quot;</span>
                    <span class="p">)</span>
                    <span class="k">continue</span>
                <span class="c1"># Use string for model ref in kwargs</span>
                <span class="n">target_model_str</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">django_model_rel</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">app_label</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">django_model_rel</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="c1"># Add import for the related Django model</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="n">django_model_rel</span><span class="p">)</span>

                <span class="c1"># Define FK kwargs (always null=True, blank=True)</span>
                <span class="c1"># Use strings for values that need to be represented in code</span>
                <span class="n">fk_kwargs</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">target_model_str</span><span class="p">,</span>
                    <span class="s2">&quot;on_delete&quot;</span><span class="p">:</span> <span class="s2">&quot;models.SET_NULL&quot;</span><span class="p">,</span>  <span class="c1"># Use string for template</span>
                    <span class="s2">&quot;null&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="s2">&quot;blank&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="c1"># Generate related_name to avoid clashes</span>
                    <span class="s2">&quot;related_name&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">fk_field_name</span><span class="si">}</span><span class="s2">_set&#39;&quot;</span><span class="p">,</span>  <span class="c1"># Ensure related_name is quoted string</span>
                <span class="p">}</span>
                <span class="c1"># Generate the definition string</span>
                <span class="n">fk_def_string</span> <span class="o">=</span> <span class="n">generate_field_definition_string</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">,</span> <span class="n">fk_kwargs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">)</span>
                <span class="c1"># Add to the main definitions dictionary</span>
                <span class="n">carrier</span><span class="o">.</span><span class="n">django_field_definitions</span><span class="p">[</span><span class="n">fk_field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fk_def_string</span>

    <span class="c1"># --- Prepare Final Context --- #</span>
    <span class="c1"># Ensure the context uses the potentially updated definitions dict from the carrier</span>
    <span class="c1"># Subclass _get_model_definition_extra_context should already provide this</span>
    <span class="c1"># via `field_definitions=carrier.django_field_definitions`</span>
    <span class="n">template_context</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="n">django_model_name</span><span class="p">,</span>
        <span class="s2">&quot;pydantic_model_name&quot;</span><span class="p">:</span> <span class="n">source_model_name</span><span class="p">,</span>
        <span class="s2">&quot;base_model_name&quot;</span><span class="p">:</span> <span class="n">base_model_name</span><span class="p">,</span>
        <span class="s2">&quot;is_timescale_model&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">base_model_name</span><span class="p">)</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;TimescaleBase&quot;</span><span class="p">)),</span>
        <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="n">meta_options</span><span class="p">,</span>
        <span class="s2">&quot;app_label&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
        <span class="s2">&quot;multi_fk_field_names&quot;</span><span class="p">:</span> <span class="n">multi_fk_field_names</span><span class="p">,</span>  <span class="c1"># Pass names for validation hint</span>
        <span class="s2">&quot;validation_needed&quot;</span><span class="p">:</span> <span class="n">validation_needed</span><span class="p">,</span>  <span class="c1"># Signal if validation needed</span>
        <span class="c1"># Include extra context from subclass (should include field_definitions)</span>
        <span class="o">**</span><span class="n">extra_context</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="c1"># --- Render Template --- #</span>
    <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;model_definition.py.j2&quot;</span><span class="p">)</span>
    <span class="n">definition_str</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">template_context</span><span class="p">)</span>

    <span class="c1"># Add import for the original source model</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_source_model_import</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">definition_str</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pydantic2django.core.base_generator.BaseStaticGenerator.generate_models_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_models_file</span><span class="p">()</span></code>

<a href="#pydantic2django.core.base_generator.BaseStaticGenerator.generate_models_file" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generates the complete content for the models.py file.
This method orchestrates discovery, model setup, definition generation,
import collection, and template rendering.
Subclasses might override this to add specific steps (like context class generation).</p>


            <details class="quote">
              <summary>Source code in <code>src/pydantic2django/core/base_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_models_file</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates the complete content for the models.py file.</span>
<span class="sd">    This method orchestrates discovery, model setup, definition generation,</span>
<span class="sd">    import collection, and template rendering.</span>
<span class="sd">    Subclasses might override this to add specific steps (like context class generation).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">discover_models</span><span class="p">()</span>  <span class="c1"># Populates discovery instance</span>
    <span class="n">models_to_process</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_models_in_processing_order</span><span class="p">()</span>  <span class="c1"># Abstract method</span>

    <span class="c1"># Reset state for this run</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">extra_type_imports</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">pydantic_imports</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">context_class_imports</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">imported_names</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">processed_field_types</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="c1"># Re-add base model import after clearing</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">_add_type_import</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">)</span>

    <span class="n">model_definitions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">django_model_names</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># For __all__</span>

    <span class="c1"># Setup Django models first (populates self.carriers)</span>
    <span class="k">for</span> <span class="n">source_model</span> <span class="ow">in</span> <span class="n">models_to_process</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_django_model</span><span class="p">(</span><span class="n">source_model</span><span class="p">)</span>  <span class="c1"># Calls factory, populates carrier</span>

    <span class="c1"># Generate definitions from carriers</span>
    <span class="k">for</span> <span class="n">carrier</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span><span class="p">:</span>
        <span class="c1"># Generate Django model definition if model exists</span>
        <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">model_def</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_model_definition</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>  <span class="c1"># Uses template</span>
                <span class="k">if</span> <span class="n">model_def</span><span class="p">:</span>  <span class="c1"># Only add if definition was generated</span>
                    <span class="n">model_definitions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">model_def</span><span class="p">)</span>
                    <span class="n">django_model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_generic_type</span><span class="p">(</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                    <span class="n">django_model_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">django_model_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">source_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_source_model_name</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error generating definition for source model </span><span class="si">{</span><span class="n">source_name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Subclasses might add context class generation here by overriding this method</span>
        <span class="c1"># or by generate_model_definition adding context-related imports.</span>

    <span class="c1"># Deduplicate definitions</span>
    <span class="n">unique_model_definitions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deduplicate_definitions</span><span class="p">(</span><span class="n">model_definitions</span><span class="p">)</span>

    <span class="c1"># Deduplicate imports gathered during the process</span>
    <span class="n">imports</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">deduplicate_imports</span><span class="p">()</span>

    <span class="c1"># Prepare context using subclass method (_prepare_template_context)</span>
    <span class="n">template_context</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_template_context</span><span class="p">(</span><span class="n">unique_model_definitions</span><span class="p">,</span> <span class="n">django_model_names</span><span class="p">,</span> <span class="n">imports</span><span class="p">)</span>

    <span class="c1"># Add common context items</span>
    <span class="n">template_context</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;generation_timestamp&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">),</span>
            <span class="s2">&quot;base_model_module&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
            <span class="s2">&quot;base_model_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
            <span class="s2">&quot;extra_type_imports&quot;</span><span class="p">:</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">import_handler</span><span class="o">.</span><span class="n">extra_type_imports</span><span class="p">),</span>
            <span class="c1"># Add other common items as needed</span>
        <span class="p">}</span>
    <span class="p">)</span>

    <span class="c1"># Render the main template</span>
    <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jinja_env</span><span class="o">.</span><span class="n">get_template</span><span class="p">(</span><span class="s2">&quot;models_file.py.j2&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="o">**</span><span class="n">template_context</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="pydantic2django.core.base_generator.BaseStaticGenerator.setup_django_model" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setup_django_model</span><span class="p">(</span><span class="n">source_model</span><span class="p">)</span></code>

<a href="#pydantic2django.core.base_generator.BaseStaticGenerator.setup_django_model" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Uses the model factory to create a Django model representation from a source model.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source_model</code>
            </td>
            <td>
                  <code><span title="pydantic2django.core.base_generator.SourceModelType">SourceModelType</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The source model instance (e.g., Pydantic class, Dataclass).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="ConversionCarrier (pydantic2django.core.factories.ConversionCarrier)" href="../../../../Architecture/OVERVIEW/#pydantic2django.core.factories.ConversionCarrier">ConversionCarrier</a>[<span title="pydantic2django.core.base_generator.SourceModelType">SourceModelType</span>] | None</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A ConversionCarrier containing the results, or None if creation failed.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/pydantic2django/core/base_generator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">setup_django_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_model</span><span class="p">:</span> <span class="n">SourceModelType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConversionCarrier</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Uses the model factory to create a Django model representation from a source model.</span>

<span class="sd">    Args:</span>
<span class="sd">        source_model: The source model instance (e.g., Pydantic class, Dataclass).</span>

<span class="sd">    Returns:</span>
<span class="sd">        A ConversionCarrier containing the results, or None if creation failed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">source_model_name</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">source_model</span><span class="p">,</span> <span class="s2">&quot;__name__&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_model</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Setting up Django model for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Instantiate the carrier here</span>
    <span class="n">carrier</span> <span class="o">=</span> <span class="n">ConversionCarrier</span><span class="p">(</span>
        <span class="n">source_model</span><span class="o">=</span><span class="n">cast</span><span class="p">(</span><span class="nb">type</span><span class="p">[</span><span class="n">SourceModelType</span><span class="p">],</span> <span class="n">source_model</span><span class="p">),</span>
        <span class="n">meta_app_label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">app_label</span><span class="p">,</span>
        <span class="n">base_django_model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">base_model_class</span><span class="p">,</span>
        <span class="n">class_name_prefix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">class_name_prefix</span><span class="p">,</span>
        <span class="c1"># Add other defaults/configs if needed, e.g., strict mode</span>
        <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Example default</span>
        <span class="c1"># GFK flags</span>
        <span class="n">enable_gfk</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">enable_gfk</span><span class="p">,</span>
        <span class="n">gfk_policy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_policy</span><span class="p">,</span>
        <span class="n">gfk_threshold_children</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_threshold_children</span><span class="p">,</span>
        <span class="n">gfk_value_mode</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_value_mode</span><span class="p">,</span>
        <span class="n">gfk_normalize_common_attrs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gfk_normalize_common_attrs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Use the factory to process the source model and populate the carrier</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_factory_instance</span><span class="o">.</span><span class="n">make_django_model</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>  <span class="c1"># Pass carrier to factory</span>

        <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">carriers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">carrier</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Successfully processed </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">carrier</span><span class="o">.</span><span class="n">django_model</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">carrier</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Log if model creation resulted in None (e.g., only context fields)</span>
            <span class="c1"># Check carrier.context_fields or carrier.invalid_fields for details</span>
            <span class="k">if</span> <span class="n">carrier</span><span class="o">.</span><span class="n">context_fields</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">carrier</span><span class="o">.</span><span class="n">django_fields</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">carrier</span><span class="o">.</span><span class="n">relationship_fields</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Skipped Django model class for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> - only context fields found.&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">carrier</span><span class="o">.</span><span class="n">invalid_fields</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Skipped Django model class for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> due to invalid fields: </span><span class="si">{</span><span class="n">carrier</span><span class="o">.</span><span class="n">invalid_fields</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Django model was not generated for </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> for unknown reasons.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Return None if no Django model was created</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error processing </span><span class="si">{</span><span class="n">source_model_name</span><span class="si">}</span><span class="s2"> with factory: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.sections", "navigation.instant", "navigation.tracking", "navigation.expand", "navigation.path", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tabs.link", "toc.integrate", "toc.follow", "search.share"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>